{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/jaidshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/jaidshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/var/www/jaidshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/var/www/jaidshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/var/www/jaidshop/frontend/src/screens/ProductScreen.js\";\nimport axios from 'axios';\nimport React, { useEffect, useReducer } from 'react';\nimport { useParams } from 'react-router-dom';\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return _objectSpread({}, state, {\n        loading: true\n      });\n\n    case 'FETCH_SUCCESS':\n      return _objectSpread({}, state, {\n        products: action.payload,\n        loading: false\n      });\n\n    case 'FETCH_FAIL':\n      return _objectSpread({}, state, {\n        loading: false,\n        error: action.payload\n      });\n\n    default:\n      return state;\n  }\n};\n\nfunction ProductScreen() {\n  var params = useParams();\n  var slug = params.slug;\n\n  var _useReducer = useReducer(reducer, {\n    product: [],\n    loading: true,\n    error: ''\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      _useReducer2$ = _useReducer2[0],\n      loading = _useReducer2$.loading,\n      error = _useReducer2$.error,\n      product = _useReducer2$.product,\n      dispatch = _useReducer2[1]; // const [products, setProducts] = useState([]);\n\n\n  useEffect(function () {\n    var fetchData = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch({\n                  type: 'FETCH_REQUEST'\n                });\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.get(\"/api/products/slug/\".concat(slug));\n\n              case 4:\n                result = _context.sent;\n                dispatch({\n                  type: 'FETCH_SUCCESS',\n                  payload: result.data\n                });\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                dispatch({\n                  type: 'FETCH_FAIL',\n                  payload: _context.t0.message\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      }));\n\n      return function fetchData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, [slug]);\n  return loading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 18\n    }\n  }, \"Loading...\") : error ? /*#__PURE__*/React.createElement(\"error\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 18\n    }\n  }, error) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, product.name);\n}\n\nexport default ProductScreen;","map":{"version":3,"sources":["/var/www/jaidshop/frontend/src/screens/ProductScreen.js"],"names":["axios","React","useEffect","useReducer","useParams","reducer","state","action","type","loading","products","payload","error","ProductScreen","params","slug","product","dispatch","fetchData","get","result","data","message","name"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,SAASC,SAAT,QAA0B,kBAA1B;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR,EAAmB;AAC/B,UAAOA,MAAM,CAACC,IAAd;AACE,SAAK,eAAL;AACE,+BAAWF,KAAX;AAAkBG,QAAAA,OAAO,EAAE;AAA3B;;AACF,SAAK,eAAL;AACE,+BAAWH,KAAX;AAAkBI,QAAAA,QAAQ,EAAEH,MAAM,CAACI,OAAnC;AAA4CF,QAAAA,OAAO,EAAE;AAArD;;AACF,SAAK,YAAL;AACE,+BAAWH,KAAX;AAAkBG,QAAAA,OAAO,EAAC,KAA1B;AAAiCG,QAAAA,KAAK,EAAEL,MAAM,CAACI;AAA/C;;AACF;AACE,aAAOL,KAAP;AARJ;AAWD,CAZH;;AAeA,SAASO,aAAT,GAAyB;AACrB,MAAMC,MAAM,GAAGV,SAAS,EAAxB;AADqB,MAEdW,IAFc,GAEND,MAFM,CAEdC,IAFc;;AAAA,oBAIwBZ,UAAU,CAACE,OAAD,EAAU;AAC7DW,IAAAA,OAAO,EAAE,EADoD;AAE7DP,IAAAA,OAAO,EAAE,IAFoD;AAG7DG,IAAAA,KAAK,EAAE;AAHsD,GAAV,CAJlC;AAAA;AAAA;AAAA,MAIdH,OAJc,iBAIdA,OAJc;AAAA,MAILG,KAJK,iBAILA,KAJK;AAAA,MAIEI,OAJF,iBAIEA,OAJF;AAAA,MAIYC,QAJZ,oBASnB;;;AACAf,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMgB,SAAS;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAChBD,gBAAAA,QAAQ,CAAC;AAACT,kBAAAA,IAAI,EAAE;AAAP,iBAAD,CAAR;AADgB;AAAA;AAAA,uBAGOR,KAAK,CAACmB,GAAN,8BAAgCJ,IAAhC,EAHP;;AAAA;AAGRK,gBAAAA,MAHQ;AAIdH,gBAAAA,QAAQ,CAAC;AAACT,kBAAAA,IAAI,EAAE,eAAP;AAAwBG,kBAAAA,OAAO,EAAES,MAAM,CAACC;AAAxC,iBAAD,CAAR;AAJc;AAAA;;AAAA;AAAA;AAAA;AAOdJ,gBAAAA,QAAQ,CAAC;AAACT,kBAAAA,IAAI,EAAE,YAAP;AAAqBG,kBAAAA,OAAO,EAAE,YAAIW;AAAlC,iBAAD,CAAR;;AAPc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAATJ,SAAS;AAAA;AAAA;AAAA,OAAf;;AAcAA,IAAAA,SAAS;AAEV,GAjBQ,EAiBN,CAACH,IAAD,CAjBM,CAAT;AAkBF,SACIN,OAAO,gBAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAF,GACLG,KAAK,gBAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAQA,KAAR,CAAF,gBAEX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACMI,OAAO,CAACO,IADd,CAJA;AAaH;;AAED,eAAeV,aAAf","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useReducer } from 'react';\nimport { useParams } from 'react-router-dom';\n\nconst reducer = (state, action) => {\n    switch(action.type) {\n      case 'FETCH_REQUEST':\n        return {...state, loading: true};\n      case 'FETCH_SUCCESS':\n        return {...state, products: action.payload, loading: false};\n      case 'FETCH_FAIL':\n        return {...state, loading:false, error: action.payload};  \n      default:\n        return state;    \n  \n    }\n  };\n\n\nfunction ProductScreen() {\n    const params = useParams();\n    const {slug} = params;\n\n    const[{loading, error, product}, dispatch] = useReducer(reducer, {\n        product: [],\n        loading: true,\n        error: '',\n      });\n      // const [products, setProducts] = useState([]);\n      useEffect(() => {\n        const fetchData = async () => {\n          dispatch({type: 'FETCH_REQUEST'});\n          try {\n            const result = await axios.get(`/api/products/slug/${slug}`);\n            dispatch({type: 'FETCH_SUCCESS', payload: result.data });\n    \n          } catch(err) {\n            dispatch({type: 'FETCH_FAIL', payload: err.message });\n    \n          }\n          \n         \n    \n        };\n        fetchData();\n    \n      }, [slug]);\n    return (\n        loading? <div>Loading...</div>\n        : error? <error>{error}</error>\n        :\n    <div>\n        { product.name }\n    </div>\n    \n    \n    );\n\n\n\n}\n\nexport default ProductScreen;"]},"metadata":{},"sourceType":"module"}