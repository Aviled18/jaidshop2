{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/jaidshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/jaidshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/var/www/jaidshop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/var/www/jaidshop/frontend/src/SigninScreen.js\";\nimport React, { useContext, useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport { Helmet } from 'react-helmet-async';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport Axios from 'axios';\nimport { Store } from './Store';\nexport default function SigninScreen() {\n  var navigate = useNavigate();\n\n  var _useLocation = useLocation(),\n      search = _useLocation.search;\n\n  var redirectInUrl = new URLSearchParams(search).get('redirect');\n  var redirect = redirectInUrl ? redirectInUrl : '/';\n\n  var _useState = useState(' '),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(' '),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      ctxDispatch = _useContext.dispatch;\n\n  var submitHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var _yield$Axios$post, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return Axios.post('/api/users/signin', {\n                email: email,\n                password: password\n              });\n\n            case 4:\n              _yield$Axios$post = _context.sent;\n              data = _yield$Axios$post.data;\n              ctxDispatch({\n                type: 'USER_SIGNIN',\n                payload: data\n              });\n              localStorage.setItem('userInfo', JSON.stringify(data));\n              navigate(redirect || '/');\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](1);\n              alert('Invalid email or password');\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 11]]);\n    }));\n\n    return function submitHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect;\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"small-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }, \"Sign In\")), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    required: true,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    required: true,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, \"Sign In\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/signup?redirect=\".concat(redirect),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, \"Create an account\"))));\n}","map":{"version":3,"sources":["/var/www/jaidshop/frontend/src/SigninScreen.js"],"names":["React","useContext","useState","Container","Button","Form","Helmet","Link","useLocation","useNavigate","Axios","Store","SigninScreen","navigate","search","redirectInUrl","URLSearchParams","get","redirect","email","setEmail","password","setPassword","state","ctxDispatch","dispatch","submitHandler","e","preventDefault","post","data","type","payload","localStorage","setItem","JSON","stringify","alert","useEffect","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport { Helmet } from 'react-helmet-async';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport Axios from 'axios';\nimport { Store } from './Store';\n\nexport default function SigninScreen() {\n\n    const navigate = useNavigate();\n    const { search } = useLocation();\n    const redirectInUrl = new URLSearchParams(search).get('redirect');\n    const redirect = redirectInUrl ? redirectInUrl : '/';\n\n    const [email, setEmail] = useState(' ');\n    const [password, setPassword] = useState(' ');\n\n    const { state, dispatch: ctxDispatch } = useContext(Store);\n\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        try {\n            const { data } = await Axios.post('/api/users/signin', {\n                email,\n                password,\n            });\n            ctxDispatch({type: 'USER_SIGNIN', payload: data})\n            localStorage.setItem('userInfo', JSON.stringify(data));\n            navigate(redirect || '/');\n\n        } catch (err) {\n\n            alert('Invalid email or password');\n\n        }\n    }\n\n    useEffect\n\n\n    return (\n        <Container className=\"small-container\">\n            <Helmet>\n                <title>Sign In</title>\n            </Helmet>\n            <h1 className=\"my-3\">Sign In</h1>\n            <Form onSubmit={submitHandler}>\n                <Form.Group className=\"mb-3\" controlId=\"email\">\n                    <Form.Label>Email</Form.Label>\n                    <Form.Control type=\"email\" required onChange={(e) => setEmail(e.target.value)}/>\n                </Form.Group>\n                <Form.Group className=\"mb-3\" controlId=\"password\">\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control type=\"password\" required onChange={(e) => setPassword(e.target.value)}/>\n                </Form.Group>\n                <div className=\"mb-3\">\n                    <Button type=\"submit\">Sign In</Button>\n                </div>\n                <div className=\"mb-3\">\n                    <Link to={`/signup?redirect=${redirect}`}>Create an account</Link>\n                </div>\n            </Form>\n\n        </Container>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}